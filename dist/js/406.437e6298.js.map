{"version":3,"file":"js/406.437e6298.js","mappings":"0PAkBMA,EAAYA,KAChBC,EAAK,YAAY,E,2OCbnB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,sOCMMC,EAAeC,IACnBH,EAAK,oBAAqBG,EAAMC,OAAOC,MAAM,E,kJCT/C,MAAMJ,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,4YCYMK,GAAQC,EAAAA,EAAAA,MAQRC,EAAgBC,gBACdC,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,EAAUC,EAAAA,EAAKC,YAAYC,IAAKT,EAAMU,OAAOC,IAAK,CACpEC,UAAUC,EAAAA,EAAAA,IAAYC,EAAMC,UAC5B,E,8UCzBJ,MAAMpB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,yKCkBMqB,GAAaC,EAAAA,EAAAA,IAAI,CACrBC,MAAOJ,EAAMK,KAAKD,MAClBE,KAAMN,EAAMK,KAAKC,OAGbC,EAAiBlB,gBACfC,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,EAAUC,EAAAA,EAAKC,YAAYC,IAAM,GAAEK,EAAMK,KAAKR,MAAOK,EAAWjB,OACpFL,EAAK,YAAY,E,2kBC3BnB,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,wNC2BA,MAAMM,GAAQC,EAAAA,EAAAA,MAERqB,GAAiBL,EAAAA,EAAAA,KAAI,GAErBF,GAAUE,EAAAA,EAAAA,IAAI,CAClBG,KAAM,KAGFG,EAAcpB,UAClB,MAAMqB,EAAcC,KAAKC,MACnBC,EAAe,IAAIF,KAAKD,GAAaI,mBAAmB,QAAS,CAAEC,KAAM,UAAWC,OAAQ,YAE5FC,EAAa,CACjBpB,GAAIa,EACJQ,WAAYzB,EAAAA,EAAKC,YAAYyB,YAC7BC,YAAa3B,EAAAA,EAAKC,YAAY2B,MAC9BR,aAAcA,EACdP,KAAML,EAAQhB,MAAMqB,YAGhBhB,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIC,EAAAA,EAAUC,EAAAA,EAAKC,YAAYC,IAAKT,EAAMU,OAAOC,IAAK,CACpEC,UAAUwB,EAAAA,EAAAA,IAAWL,KAEvBhB,EAAQhB,MAAMqB,KAAO,EAAE,EAGnBR,GAAWK,EAAAA,EAAAA,IAAI,IAEfE,GAAOF,EAAAA,EAAAA,MACPoB,GAAqBC,EAAAA,EAAAA,KAAWjC,EAAAA,EAAAA,IAAIC,EAAAA,EAAUC,EAAAA,EAAKC,YAAYC,IAAKT,EAAMU,OAAOC,KAAMN,IAC3Fc,EAAKpB,MAAQM,EAAIkC,OACjB3B,EAASb,MAAQM,EAAIkC,OAAO3B,QAAQ,I,OAGtC4B,EAAAA,EAAAA,KAAgB,IAAMH,M,0sCC/DtB,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack:///./src/components/UI/MyModal.vue","webpack:///./src/components/UI/MyModal.vue?a8ea","webpack:///./src/components/UI/MyTextarea.vue","webpack:///./src/components/UI/MyTextarea.vue?efd6","webpack:///./src/components/CommentItem.vue","webpack:///./src/components/CommentItem.vue?a3bf","webpack:///./src/components/PostEditForm.vue","webpack:///./src/components/PostEditForm.vue?5a69","webpack:///./src/views/PostView.vue","webpack:///./src/views/PostView.vue?6143"],"sourcesContent":["<template>\n  <div class=\"modal\" v-if=\"visibility\" @click=\"hideModal\">\n    <div @click.stop class=\"modal__content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script setup>\nconst props = defineProps({\n  visibility: {\n    type: Boolean,\n    default: false,\n  }\n})\n\nconst emit = defineEmits(['hideModal'])\n\nconst hideModal = () => {\n  emit('hideModal')\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal {\n  display: flex;\n  position: fixed;\n  padding: 0 20px;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgb(0, 0, 0, 0.5);\n\n  &__content {\n    margin: auto;\n    padding: 20px;\n    width: 100%;\n    max-width: 770px;\n    background: $bg-secondary;\n    border-radius: 7px;\n  }\n}\n</style>\n","import script from \"./MyModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MyModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MyModal.vue?vue&type=style&index=0&id=d9b9df20&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d9b9df20\"]])\n\nexport default __exports__","<template>\n  <textarea class=\"textarea\" :value=\"modelValue\" @input=\"updateInput\" :maxlength=\"charactersMaxCount\"></textarea>\n</template>\n\n<script setup>\nimport { defineProps, defineEmits } from 'vue';\n\nconst props = defineProps({\n  modelValue: String,\n  charactersMaxCount: Number,\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst updateInput = (event) => {\n  emit('update:modelValue', event.target.value)\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.textarea {\n  font: inherit;\n  color: inherit;\n  width: 100%;\n  height: 140px;\n  padding: 10px 15px;\n  border: 1px solid $border-primary;\n  border-radius: 7px;\n  resize: none;\n}\n</style>","import script from \"./MyTextarea.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MyTextarea.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MyTextarea.vue?vue&type=style&index=0&id=112ad556&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-112ad556\"]])\n\nexport default __exports__","<template>\n  <div class=\"comment\">\n    <div class=\"comment__header\">\n      <div>\n        <p>{{ comment.authorEmail }} | {{ comment.authorName }}</p>\n        <p class=\"comment__date\">{{ comment.creationDate }}</p>\n      </div>\n      <SvgIcon :iconName=\"'#close'\" @click=\"deleteComment\" />\n    </div>\n    <hr>\n    <p class=\"comment__body\">{{ comment.body }}</p>\n  </div>\n</template>\n\n<script setup>\nimport SvgIcon from '@/components/UI/SvgIcon';\nimport { auth, dataBase } from '@/firebase/init';\nimport { arrayRemove, doc, updateDoc } from 'firebase/firestore';\nimport { useRoute } from \"vue-router\";\n\nconst route = useRoute();\n\nconst props = defineProps({\n  comment: {\n    type: Object,\n  }\n})\n\nconst deleteComment = async () => {\n  await updateDoc(doc(dataBase, auth.currentUser.uid, route.params.id), {\n    comments: arrayRemove(props.comment)\n  })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.comment {\n  padding: 4px 10px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  border: 1px solid $border-primary;\n  border-radius: 7px;\n  background-color: $bg-item-light;\n\n  &__header {\n    font-size: 12px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  &__body {\n    font-size: 12px;\n    text-align: justify;\n  }\n}\n</style>","import script from \"./CommentItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CommentItem.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CommentItem.vue?vue&type=style&index=0&id=1746c341&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1746c341\"]])\n\nexport default __exports__","<template>\n  <div class=\"form\">\n    <MyInput v-model=\"editedPost.title\" type=\"text\"></MyInput>\n    <MyTextarea v-model=\"editedPost.body\" type=\"text\"></MyTextarea>\n    <MyButton class=\"button button__primary\" @click=\"saveEditedPost\">Save</MyButton>\n    <MyButton class=\"button button__primary\" @click=\"emit('hideModal')\">Cancel</MyButton>\n  </div>\n</template>\n\n<script setup>\nimport MyButton from '@/components/UI/MyButton';\nimport MyInput from '@/components/UI/MyInput';\nimport MyTextarea from '@/components/UI/MyTextarea';\nimport { ref } from 'vue';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { auth, dataBase } from '@/firebase/init';\n\nconst props = defineProps({\n  post: {\n    type: Object,\n    required: true,\n  }\n})\n\nconst emit = defineEmits(['hideModal']);\n\nconst editedPost = ref({\n  title: props.post.title,\n  body: props.post.body,\n})\n\nconst saveEditedPost = async () => {\n  await updateDoc(doc(dataBase, auth.currentUser.uid, `${props.post.id}`), editedPost.value)\n  emit('hideModal')\n} \n</script>\n\n<style lang=\"scss\" scoped>\n.form {\n  @extend %modal-form;\n}\n</style>","import script from \"./PostEditForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PostEditForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PostEditForm.vue?vue&type=style&index=0&id=3885999b&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3885999b\"]])\n\nexport default __exports__","<template >\n  <div class=\"post\">\n    <div class=\"post__plug\" v-if=\"post === undefined\">Loading...</div>\n    <div class=\"post__body\" v-else>\n      <div class=\"post__content\">\n        <h1 class=\"post__content-title\"> {{ post.title }}</h1>\n        <p>{{ post.body }}</p>\n      </div>\n      <MyButton class=\"button button__primary button__primary_wide\" @click=\"isModalVisible = !isModalVisible\">Edit\n      </MyButton>\n      <div>\n        <MyTextarea v-model=\"comment.body\" placeholder=\"Enter your comment here\" :charactersMaxCount=\"1000\"></MyTextarea>\n        <MyButton class=\"button button__primary button__primary_wide\" @click=\"saveComment\">Save comment</MyButton>\n      </div>\n      <div class=\"post__comments\" v-if=\"comments.length > 0\">\n        <CommentItem v-for=\"comment in comments\" :key=\"comment.id\" :comment=\"comment\"></CommentItem>\n      </div>\n    </div>\n  </div>\n  <MyModal :visibility=\"isModalVisible\" @hideModal=\"isModalVisible = !isModalVisible\">\n    <PostEditForm :post=\"post\" @hideModal=\"isModalVisible = !isModalVisible\" />\n  </MyModal>\n</template>\n\n<script setup>\nimport CommentItem from '@/components/CommentItem';\nimport MyButton from '@/components/UI/MyButton';\nimport PostEditForm from '@/components/PostEditForm'\nimport MyModal from \"@/components/UI/MyModal\";\nimport MyTextarea from \"@/components/UI/MyTextarea\";\nimport { auth, dataBase } from \"@/firebase/init\";\nimport { arrayUnion, doc, onSnapshot, updateDoc, } from \"firebase/firestore\";\nimport { onBeforeUnmount, ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nconst route = useRoute();\n\nconst isModalVisible = ref(false);\n\nconst comment = ref({\n  body: '',\n});\n\nconst saveComment = async () => {\n  const currentDate = Date.now()\n  const creationDate = new Date(currentDate).toLocaleDateString('ru-RU', { hour: \"numeric\", minute: \"numeric\" })\n\n  const newComment = {\n    id: currentDate,\n    authorName: auth.currentUser.displayName,\n    authorEmail: auth.currentUser.email,\n    creationDate: creationDate,\n    body: comment.value.body,\n  }\n\n  await updateDoc(doc(dataBase, auth.currentUser.uid, route.params.id), {\n    comments: arrayUnion(newComment),\n  })\n  comment.value.body = '';\n}\n\nconst comments = ref([]);\n\nconst post = ref();\nconst postChangeListener = onSnapshot(doc(dataBase, auth.currentUser.uid, route.params.id), (doc) => {\n  post.value = doc.data();\n  comments.value = doc.data().comments\n})\n\nonBeforeUnmount(() => postChangeListener())\n</script>\n\n<style lang=\"scss\" scoped>\n.post {\n  @extend %container;\n  min-height: 100vh;\n\n  &__body {\n    display: flex;\n    flex-direction: column;\n    gap: 40px;\n  }\n\n  &__content {\n    display: flex;\n    flex-direction: column;\n    gap: 40px;\n    text-align: justify;\n\n    &-title {\n      text-align: center;\n    }\n  }\n\n  &__comments {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n  }\n}\n</style>","import script from \"./PostView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PostView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PostView.vue?vue&type=style&index=0&id=182c6dfc&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-182c6dfc\"]])\n\nexport default __exports__"],"names":["hideModal","emit","__exports__","updateInput","event","target","value","route","useRoute","deleteComment","async","updateDoc","doc","dataBase","auth","currentUser","uid","params","id","comments","arrayRemove","props","comment","editedPost","ref","title","post","body","saveEditedPost","isModalVisible","saveComment","currentDate","Date","now","creationDate","toLocaleDateString","hour","minute","newComment","authorName","displayName","authorEmail","email","arrayUnion","postChangeListener","onSnapshot","data","onBeforeUnmount"],"sourceRoot":""}